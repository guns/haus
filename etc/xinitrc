#!/usr/bin/env bash

for d in /etc/X11/xinit/xinitrc.d ~/.xinitrc.d; do
    for f in "$d"/*; do
        [[ -r "$f" ]] && . "$f"
    done
done
unset d f

# Execute login scripts to set environment variables
for f in /etc/profile \
         ~/.profile \
         ~/.bash_profile \
         ~/.bashrc.d/env.bash \
         ~/.bashrc.d/path.bash
do
    [[ -r "$f" ]] && . "$f"
done
unset f

# For xdg-open
# https://wiki.archlinux.org/index.php/Environment_Variables#Examples
export DE='xfce'

# Qt
export QT_STYLE_OVERRIDE='gtk'

# Java
export _JAVA_AWT_WM_NONREPARENTING='1'

# WINE
export WINEARCH='win32'
export WINEDLLOVERRIDES='winemenubuilder.exe=d'

# GnuPG
if [[ "${gnupg_SSH_AUTH_SOCK_by:-0}" -ne "$$" ]]; then
    export SSH_AUTH_SOCK="${HOME}/.gnupg/S.gpg-agent.ssh"
fi

# rxvt-unicode
export URXVT_PERL_LIB="$HOME/.urxvt/ext/urxvt-perls"

# Autostart
pushd .
cd ~/Downloads

/usr/bin/sxhkd &
/usr/bin/pulseaudio --start &
(/bin/sh ~/.fehbg; exec /usr/bin/tint2) &
/usr/bin/kupfer --no-splash &
xautolock-wrapper &

popd

# Start WM under gpg-agent in classic daemon mode
exec /usr/bin/gpg-agent --enable-ssh-support --daemon /usr/bin/bspwm
