#!/usr/bin/env bash

for d in /etc/X11/xinit/xinitrc.d ~/.xinitrc.d; do
    for f in "$d"/*; do
        [[ -r "$f" ]] && . "$f"
    done
done
unset d f

# Execute login scripts to set environment variables
for f in /etc/profile \
         ~/.profile \
         ~/.bash_profile \
         ~/.bashrc.d/env.bash \
         ~/.bashrc.d/path.bash
do
    [[ -r "$f" ]] && . "$f"
done
unset f

# Autostart
pushd .
cd ~/Downloads

/usr/bin/sxhkd &
/usr/bin/pulseaudio --start &
(/bin/sh ~/.fehbg; exec /usr/bin/tint2) &
/usr/bin/kupfer --no-splash &
xautolock-wrapper &

popd

# Start WM under gpg-agent in classic daemon mode
exec /usr/bin/gpg-agent --enable-ssh-support --daemon /usr/bin/bspwm
