# -*- encoding: utf-8 -*-

task :default => :build

desc 'Build clojure'
task :build do
  sh 'ant'
end

desc 'Install clojure and contrib jars to PREFIX=/opt/jars'
task :install do
  prefix = ENV['PREFIX'] || '/opt/clojure'

  until clojure = Dir.entries('.').find { |f| f =~ /\Aclojure-.*\.jar\z/ }
    Rake::Task[:build].execute
  end

  mkdir_p prefix
  cp clojure, prefix
  Dir.chdir(prefix) { ln_sf clojure, 'clojure.jar' }
end
