#!/bin/bash
#
# Simple tmux wrapper

WRAPPER=''

while getopts :gs OPT; do
    case $OPT in
    g) WRAPPER='gpg-shell';;
    s) WRAPPER='ssh-shell';;
    *) echo "Usage: ${0##*/} [-gs]" >&2; exit 1
    esac
done
shift $((OPTIND-1))

if [[ $TMUX ]]; then
    echo '$TMUX is already set!' >&2
    exit 1
elif tmux has-session &>/dev/null; then
    exec $WRAPPER tmux attach
else
    exec $WRAPPER tmux new
fi
