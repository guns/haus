#!/usr/bin/env bash
#
# Simple tmux wrapper

while getopts :x opt; do
    case $opt in
    x) echo >&2 '`-x` option is DEPRECATED; exec is now the default';;
    *) echo >&2 "Usage: ${0##*/}"; exit 1
    esac
done
shift $((OPTIND-1))

if [[ "$TMUX" ]]; then
    echo >&2 '$TMUX is already set!'
    exit 1
elif command tmux has-session &>/dev/null; then
    exec tmux attach
else
    exec tmux new
fi
