#!/usr/bin/env ruby
# -*- encoding: utf-8 -*-

require 'csv'
require 'json'

case ARGV.size
when 0 then buf = $stdin.read
when 1 then buf = File.read(ARGV[0])
else abort 'USAGE: csv2json [file]'
end

puts CSV.parse(buf, headers: true).map(&:to_hash).to_json
