#!/usr/bin/env ruby
# -*- encoding: utf-8 -*-
#
# Copyright (c) 2014-2017 Sung Pae <self@sungpae.com>
# Distributed under the MIT license.
# http://www.opensource.org/licenses/mit-license.php

if system 'synclient', '-l', :out => '/dev/null'
  state = %x(synclient -l | grep -c 'TouchpadOff.*=.*0').chomp
  system 'synclient', "TouchpadOff=#{state}"
  puts state == '0'
else
  id = %x(xinput list)[/mouse.*id=(\d+)/i, 1]
  exit 1 if id.nil? or id.empty?
  state = (%x(xinput list-props #{id}) =~ /Device Enabled.*:\s*1$/i) ? '0' : '1'
  system %q(xinput), %q(set-prop), id, %q(Device Enabled), state
  puts state == '1'
end

system 'xdotool', 'mousemove', '10000', '10000'
