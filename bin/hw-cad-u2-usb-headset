#!/bin/sh
#
# B. Pinker writes:
#
# ISSUES (for Linux)
#
# Loud Volume- The audio defaults to "Analog Stereo Output". This sets the
# audio to be very LOUD in the headset, and only allow the volume to go down
# to about 35% or -27dB. (This level is still a little loud for my ears, but
# this could be great for someone hairing impaired.) If the slider is moved
# below 35%, the audio just cuts out completely.
#
# To resolve this, go in sound preferences, set the hardware to profile
# "Digital Stereo (IEC958) Output", then double check that input/output are
# correctly set.
#
# http://www.amazon.com/review/RC29G2M1ZLMWN/ref=cm_cr_pr_perm?ie=UTF8&ASIN=B0000ACCJA

# Restart pulseaudio to pick up iec958 output port (no hotplug support)
pulseaudio --kill
sleep 2
pulseaudio --start

CARD="alsa_card.usb-0d8c_C-Media_USB_Audio_Device-00-Device"
OUTPUT="alsa_output.usb-0d8c_C-Media_USB_Audio_Device-00-Device.iec958-stereo"
# INPUT="alsa_input.usb-0d8c_C-Media_USB_Audio_Device-00-Device.analog-mono"

pactl set-card-profile "$CARD" output:iec958-stereo+input:analog-mono
pacmd set-default-sink "$OUTPUT"
